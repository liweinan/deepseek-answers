# Next.js 手把手入门教程

Next.js 是一个流行的 React 框架，提供了服务端渲染、静态网站生成等功能。下面是一个从零开始的完整 Next.js 教程。

## 1. 环境准备

首先确保你已安装：

- Node.js (建议最新 LTS 版本)
- npm 或 yarn (Node.js 自带 npm)
- 代码编辑器 (如 VS Code)

## 2. 创建 Next.js 项目

打开终端，运行以下命令：

```bash
npx create-next-app@latest my-next-app
# 或
yarn create next-app my-next-app
```

创建过程中会询问一些配置选项：

```
√ Would you like to use TypeScript? ... No / Yes
√ Would you like to use ESLint? ... No / Yes
√ Would you like to use Tailwind CSS? ... No / Yes
√ Would you like to use `src/` directory? ... No / Yes
√ Would you like to use App Router? (recommended) ... No / Yes
√ Would you like to customize the default import alias? ... No / Yes
```

对于初学者，可以全部选择默认选项或根据需求选择。

## 3. 项目结构

创建完成后，项目结构大致如下（使用 App Router）：

```
my-next-app/
├── node_modules/
├── public/
├── src/
│   ├── app/
│   │   ├── favicon.ico
│   │   ├── globals.css
│   │   ├── layout.tsx
│   │   └── page.tsx
│   └── styles/
├── .eslintrc.json
├── .gitignore
├── next.config.js
├── package.json
└── tsconfig.json
```

## 4. 运行开发服务器

进入项目目录并启动开发服务器：

```bash
cd my-next-app
npm run dev
# 或
yarn dev
```

打开浏览器访问 `http://localhost:3000`，你应该能看到 Next.js 的欢迎页面。

## 5. 创建你的第一个页面

### 使用 App Router (Next.js 13+)

1. 打开 `src/app/page.tsx` 文件
2. 替换内容为：

```tsx
export default function Home() {
  return (
    <main className="min-h-screen p-24">
      <h1 className="text-4xl font-bold">欢迎来到我的 Next.js 应用</h1>
      <p className="mt-4 text-xl">这是我的第一个 Next.js 页面</p >
    </main>
  )
}
```

保存后，页面会自动刷新。

### 创建新页面

1. 在 `app` 目录下创建新文件夹，例如 `about`
2. 在 `about` 文件夹中创建 `page.tsx` 文件：

```tsx
export default function About() {
  return (
    <main className="min-h-screen p-24">
      <h1 className="text-4xl font-bold">关于我们</h1>
      <p className="mt-4 text-xl">这是关于页面</p >
    </main>
  )
}
```

现在访问 `http://localhost:3000/about` 就能看到新页面。

## 6. 添加导航

修改 `src/app/layout.tsx` 添加导航栏：

```tsx
import './globals.css'
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import Link from 'next/link'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: '我的 Next.js 应用',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <nav className="bg-gray-800 p-4">
          <div className="container mx-auto flex space-x-4">
            <Link href="/" className="text-white hover:text-gray-300">首页</Link>
            <Link href="/about" className="text-white hover:text-gray-300">关于</Link>
          </div>
        </nav>
        {children}
      </body>
    </html>
  )
}
```

## 7. 数据获取

Next.js 提供了多种数据获取方式。以下是使用 App Router 的示例：

### 服务端组件数据获取

创建 `src/app/products/page.tsx`：

```tsx
interface Product {
  id: number
  title: string
  price: number
}

async function getProducts(): Promise<Product[]> {
  // 模拟API调用
  const res = await fetch('https://fakestoreapi.com/products')
  if (!res.ok) {
    throw new Error('Failed to fetch data')
  }
  return res.json()
}

export default async function ProductsPage() {
  const products = await getProducts()

  return (
    <main className="min-h-screen p-24">
      <h1 className="text-4xl font-bold mb-8">产品列表</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {products.map((product) => (
          <div key={product.id} className="border p-4 rounded-lg">
            <h2 className="text-xl font-semibold">{product.title}</h2>
            <p className="text-gray-600">${product.price}</p >
          </div>
        ))}
      </div>
    </main>
  )
}
```

## 8. 动态路由

创建动态路由页面：

1. 创建 `src/app/products/[id]/page.tsx`：

```tsx
interface Product {
  id: number
  title: string
  price: number
  description: string
  category: string
  image: string
}

async function getProduct(id: number): Promise<Product> {
  const res = await fetch(`https://fakestoreapi.com/products/${id}`)
  if (!res.ok) {
    throw new Error('Failed to fetch data')
  }
  return res.json()
}

export default async function ProductDetail({
  params,
}: {
  params: { id: string }
}) {
  const product = await getProduct(Number(params.id))

  return (
    <main className="min-h-screen p-24">
      <div className="max-w-4xl mx-auto">
        <div className="flex flex-col md:flex-row gap-8">
          <div className="md:w-1/3">
            < img 
              src={product.image} 
              alt={product.title}
              className="w-full h-auto object-contain"
            />
          </div>
          <div className="md:w-2/3">
            <h1 className="text-3xl font-bold mb-4">{product.title}</h1>
            <p className="text-gray-500 mb-2">{product.category}</p >
            <p className="text-2xl font-semibold mb-4">${product.price}</p >
            <p className="text-gray-700">{product.description}</p >
          </div>
        </div>
      </div>
    </main>
  )
}
```

## 9. 添加客户端交互

创建客户端组件：

1. 创建 `src/components/Counter.tsx`：

```tsx
'use client'

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)

  return (
    <div className="border p-4 rounded-lg mt-4">
      <p className="text-lg">计数: {count}</p >
      <div className="flex space-x-2 mt-2">
        <button 
          onClick={() => setCount(count + 1)}
          className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
        >
          增加
        </button>
        <button 
          onClick={() => setCount(count - 1)}
          className="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
        >
          减少
        </button>
      </div>
    </div>
  )
}
```

2. 在 `src/app/page.tsx` 中使用：

```tsx
import Counter from '@/components/Counter'

export default function Home() {
  return (
    <main className="min-h-screen p-24">
      <h1 className="text-4xl font-bold">欢迎来到我的 Next.js 应用</h1>
      <p className="mt-4 text-xl">这是我的第一个 Next.js 页面</p >
      <Counter />
    </main>
  )
}
```

## 10. 部署应用

### 本地构建

```bash
npm run build
npm run start
```

### 部署到 Vercel (Next.js 官方平台)

1. 将代码推送到 GitHub/GitLab/Bitbucket
2. 注册 Vercel 账号 (https://vercel.com)
3. 导入你的 Next.js 项目
4. 按照向导完成部署

## 11. 进阶功能

### 添加 API 路由

创建 `src/app/api/hello/route.ts`：

```ts
import { NextResponse } from 'next/server'

export async function GET() {
  return NextResponse.json({ message: 'Hello from Next.js!' })
}
```

访问 `http://localhost:3000/api/hello` 测试 API。

### 使用环境变量

1. 创建 `.env.local` 文件
2. 添加环境变量：

```
NEXT_PUBLIC_API_URL=https://api.example.com
SECRET_KEY=your-secret-key
```

3. 在代码中使用：

```tsx
const apiUrl = process.env.NEXT_PUBLIC_API_URL
// NEXT_PUBLIC_ 前缀的变量可以在客户端使用
```

## 12. 学习资源

- [Next.js 官方文档](https://nextjs.org/docs)
- [Next.js GitHub 仓库](https://github.com/vercel/next.js)
- [Next.js 学习课程](https://nextjs.org/learn)

恭喜！你现在已经掌握了 Next.js 的基础知识。继续探索更多高级功能，如中间件、服务器动作、国际化等。

---

